<%- include("../../views/partials/user/header") %>
<style>
  /* Address Page Styles */
:root {
  --primary-color: #4361ee;
  --secondary-color: #72d5a4;
  --danger-color: #e63946;
  --light-bg: #f8f9fa;
  --dark-text: #343a40;
  --light-text: #ffffff;
  --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  --border-radius: 12px;
  --transition: all 0.3s ease;
}

/* Main Layout */
.d-flex {
  display: flex;
  flex-wrap: wrap;
}

/* Sidebar & Content Spacing */
.row {
  width: 100%;
  transition: var(--transition);
}

/* Address Cards */
.card {
  border: none;
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  transition: var(--transition);
  overflow: hidden;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
}

.card-header {
  border-bottom: none;
  padding: 15px 20px;
  background-color: var(--secondary-color) !important;
  border-radius: var(--border-radius) var(--border-radius) 0 0 !important;
}

.card-header h5 {
  font-weight: 600;
  letter-spacing: 0.5px;
  color: var(--light-text) !important;
  margin: 0;
  font-size: 1.1rem;
}

.card-body {
  padding: 20px;
  background-color: var(--light-bg);
}

/* Address Text */
address {
  font-style: normal;
  line-height: 1.8;
  color: var(--dark-text);
  margin-bottom: 1.5rem;
  font-size: 0.95rem;
}

/* Action Buttons */
.btn-sm {
  padding: 0.5rem 1rem;
  font-size: 0.85rem;
  border-radius: 6px;
  font-weight: 500;
  letter-spacing: 0.5px;
  transition: var(--transition);
}

.btn-outline-primary {
  color: var(--primary-color);
  border-color: var(--primary-color);
}

.btn-outline-primary:hover {
  background-color: var(--primary-color);
  color: white;
}

.btn-small {
  padding: 0.5rem 1rem;
  font-size: 0.85rem;
  color: var(--danger-color);
  background: transparent;
  border: 1px solid var(--danger-color);
  border-radius: 6px;
  cursor: pointer;
  text-decoration: none;
  font-weight: 500;
  letter-spacing: 0.5px;
  transition: var(--transition);
  display: inline-block;
}

.btn-small:hover {
  background-color: var(--danger-color);
  color: white;
}

.delete-address {
  padding: 0.5rem 1rem;
  font-size: 0.85rem;
  color: var(--danger-color);
  background: transparent;
  border: 1px solid var(--danger-color);
  border-radius: 6px;
  cursor: pointer;
  text-decoration: none;
  font-weight: 500;
  letter-spacing: 0.5px;
  transition: var(--transition);
  display: inline-block;
}

.delete-address:hover {
  background-color: var(--danger-color);
  color: white;
}

/* Add Address Button */
a[href="/addAddress"] button {
  background-color: var(--primary-color) !important;
  border: none;
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius) !important;
  font-weight: 600;
  letter-spacing: 0.8px;
  box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
  transition: var(--transition);
  width: auto !important;
  min-width: 150px;
  height: auto !important;
  min-height: 45px;
  text-transform: uppercase;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

a[href="/addAddress"] button:hover {
  background-color: #3a56d4 !important;
  box-shadow: 0 6px 15px rgba(67, 97, 238, 0.4);
  transform: translateY(-3px);
}

/* Empty State Card */
.card-header h5:contains("No Address") {
  color: var(--dark-text);
}

/* Responsive Styles */
@media (max-width: 1199px) {
  .row {
    margin-left: 50px !important;
    margin-top: 80px !important;
  }
  
  .col-lg-5 {
    width: 47%;
  }
}

@media (max-width: 991px) {
  .row {
    margin-left: 30px !important;
  }
  
  .col-lg-5 {
    width: 100%;
    max-width: 500px;
  }
}

@media (max-width: 768px) {
  .row {
    margin-left: 20px !important;
    margin-right: 20px !important;
    margin-top: 70px !important;
    justify-content: center;
  }
  
  .d-flex {
    flex-direction: column;
  }
  
  a[href="/addAddress"] button {
    width: 100% !important;
    margin-bottom: 30px;
  }
}

@media (max-width: 576px) {
  .row {
    margin-left: 10px !important;
    margin-right: 10px !important;
    margin-top: 60px !important;
    gap: 15px !important;
  }
  
  .card-header {
    padding: 12px 15px;
  }
  
  .card-body {
    padding: 15px;
  }
  
  address {
    font-size: 0.9rem;
    line-height: 1.6;
  }
  
  .d-flex.justify-content-between {
    flex-direction: row;
  }
}

/* No custom SweetAlert styles */

/* Animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.card {
  animation: fadeIn 0.5s ease forwards;
}
</style>
<div class="d-flex" style="min-height: 100vh;">
  <!-- Sidebar -->
  <div>
    <%- include("../../views/partials/user/sidebar") %>
  </div>
 <div style="flex: 1; padding: 30px;">
<div class="row g-4 justify-content-center" style="margin-top: 100px;margin-left: 200px; margin-bottom: 50px; gap: 20px;">
    <% if (userAddress) { %>
      <% userAddress.address.forEach((address) => { %>
<div class="col-md-6 col-lg-5 d-flex" style="height: 350px;">
          <div class="card mb-3 w-100 h-100"  style="max-width: 350px;">
            <div class="card-header" style="background-color: #72d5a4;">
              <h5 class="mb-0 text-white"><%= address.addressType %></h5>
            </div>
            <div class="card-body d-flex flex-column justify-content-between">
              <address>
                <%= address.name %><br>
                <%= address.city %><br>
                <%= address.landMark %><br>
                <%= address.state %><br>
                <%= address.pincode %><br>
                <%= address.phone %><br>
                <%= address.altPhone %>
              </address>
              <div class="d-flex justify-content-between">
                <a href="/editAddress?id=<%= address._id %>" class="btn btn-sm btn-outline-primary">Edit</a>
                <a href="/deleteAddress?id=<%= address._id %>" class="btn-small delete-address">Delete</a>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col-lg-6"  style="margin-left: 50px;">
        <div class="card mb-3">
          <div class="card-header">
            <h5 class="mb-0">No Address</h5>
          </div>
          <div class="card-body">
            <address>No address available.</address>
          </div>
        </div>
      </div>
    <% } %>
  
    <div class="col-lg-5">
      <a href="/addAddress">
        <button style="background-color: blue; border: none; color: white; margin-top: 15px; border-radius: 10px; width: 150px; height: 40px;">
          Add Address
        </button>
      </a>
    </div>
  </div>
  </div>
               
            </div>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.querySelectorAll('a[href^="/deleteAddress"]').forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault(); // prevent default navigation
      const url = this.getAttribute('href');

      Swal.fire({
        title: 'Are you sure?',
        text: "Do you really want to delete this address?",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Yes, delete it!',
        cancelButtonText: 'Cancel'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = url;
        }
      });
    });
  });
</script>
